# OpenProject + Gitea 기반 프로젝트 관리 시스템 기획서

## 1. 개요

### 1.1 목적
OpenProject와 Gitea를 통합하여 소프트웨어 개발 프로젝트의 전체 라이프사이클을 관리하는 통합 플랫폼 구축

### 1.2 시스템 구성
| 서비스 | 역할 | 포트 |
|--------|------|------|
| OpenProject | 일정/Task/문서 관리 | 9001 |
| Gitea | 소스코드/CI-CD 관리 | 9002 |
| PostgreSQL | 통합 데이터베이스 | 9003 |
| Redis | 캐시 서버 | 9004 |
| Nginx | 리버스 프록시 | 9000 |

---

## 2. 일정 관리 (Schedule Management)

### 2.1 OpenProject 활용 기능
- **간트 차트 (Gantt Chart)**
  - 프로젝트 전체 일정 시각화
  - 작업 간 의존성 관리
  - 마일스톤 설정 및 추적

- **캘린더 뷰**
  - 주간/월간 일정 확인
  - 마감일 기반 작업 표시
  - 팀원별 일정 조회

- **로드맵 관리**
  - 버전별 릴리스 계획
  - 스프린트 계획 수립
  - 진행 상황 대시보드

### 2.2 일정 관리 프로세스
```
[프로젝트 생성] → [마일스톤 정의] → [스프린트 계획] → [일일 진행] → [회고]
       ↓              ↓               ↓              ↓          ↓
   연간 목표      분기별 목표      2주 단위        데일리 체크   개선사항 반영
```

---

## 3. Task 관리 (Task Management)

### 3.1 작업 유형 정의
| 유형 | 설명 | 색상 코드 |
|------|------|-----------|
| Epic | 대규모 기능 단위 | #7B68EE |
| Feature | 기능 개발 | #4169E1 |
| Task | 일반 작업 | #32CD32 |
| Bug | 버그 수정 | #FF4500 |
| Improvement | 개선 사항 | #FFD700 |

### 3.2 워크플로우 상태
```
[New] → [In Progress] → [Review] → [Testing] → [Done]
  ↓          ↓             ↓           ↓
[Rejected] [Blocked]   [Changes    [Failed]
                       Requested]
```

### 3.3 Gitea 연동
- **커밋 연결**: 커밋 메시지에 `OP#123` 형식으로 Task 번호 포함
- **PR 연결**: Pull Request 생성 시 Task 자동 업데이트
- **자동 상태 변경**: 브랜치 머지 시 Task 상태 자동 완료 처리

### 3.4 우선순위 체계
| 우선순위 | 설명 | 처리 기한 |
|----------|------|-----------|
| Urgent | 긴급 (시스템 장애) | 즉시 |
| High | 높음 (핵심 기능) | 2일 이내 |
| Normal | 보통 (일반 개발) | 1주 이내 |
| Low | 낮음 (개선사항) | 2주 이내 |

---

## 4. 문서 관리 (Document Management)

### 4.1 문서 구조
```
📁 프로젝트 문서
├── 📁 01_기획
│   ├── 요구사항 정의서
│   ├── 기능 명세서
│   └── 화면 설계서
├── 📁 02_설계
│   ├── 시스템 아키텍처
│   ├── DB 설계서
│   └── API 명세서
├── 📁 03_개발
│   ├── 코딩 컨벤션
│   ├── 개발 가이드
│   └── 테스트 계획서
├── 📁 04_배포
│   ├── 배포 가이드
│   ├── 환경 설정 문서
│   └── 릴리스 노트
└── 📁 05_운영
    ├── 운영 매뉴얼
    ├── 장애 대응 가이드
    └── 모니터링 가이드
```

### 4.2 OpenProject Wiki 활용
- **버전 관리**: 문서 변경 이력 자동 추적
- **링크 연결**: Task와 문서 간 상호 참조
- **템플릿 제공**: 표준 문서 양식 제공
- **권한 관리**: 역할별 열람/편집 권한 설정

### 4.3 Gitea 문서 관리
- **README.md**: 프로젝트 개요 및 시작 가이드
- **docs/ 폴더**: 기술 문서 Git 관리
- **Wiki**: 개발 관련 기술 문서

---

## 5. 배포 후 운영 관리 (Operation Management)

### 5.1 CI/CD 파이프라인 (Gitea Actions)
```yaml
# .gitea/workflows/deploy.yml 구조
stages:
  - build      # 빌드 및 테스트
  - staging    # 스테이징 배포
  - production # 운영 배포
```

### 5.2 배포 단계
```
[개발] → [코드 리뷰] → [테스트] → [스테이징] → [승인] → [운영 배포]
   ↓         ↓           ↓           ↓          ↓          ↓
 Gitea    PR 리뷰      자동화       검증      OpenProject   모니터링
```

### 5.3 운영 모니터링 연동
| 항목 | 도구 | 연동 방식 |
|------|------|-----------|
| 서버 모니터링 | Prometheus + Grafana | Webhook 알림 |
| 로그 수집 | Loki / ELK Stack | 대시보드 연동 |
| 장애 알림 | Alertmanager | OpenProject Issue 자동 생성 |
| 성능 추적 | APM (Application Performance) | 메트릭 대시보드 |

### 5.4 장애 대응 프로세스
```
[장애 감지] → [알림 발송] → [Issue 자동 생성] → [담당자 배정] → [원인 분석]
     ↓            ↓              ↓                 ↓              ↓
  모니터링      Slack/      OpenProject          PIC 지정       RCA 문서화
              이메일

→ [임시 조치] → [근본 해결] → [재발 방지] → [완료 보고]
       ↓            ↓             ↓            ↓
   핫픽스 배포   정식 수정     프로세스 개선   Task 완료
```

### 5.5 릴리스 관리
- **버전 체계**: Semantic Versioning (Major.Minor.Patch)
- **릴리스 노트**: 변경사항 자동 생성 (커밋 기반)
- **롤백 계획**: 배포 실패 시 자동 롤백 프로세스
- **변경 이력**: OpenProject에서 전체 변경 이력 관리

---

## 6. 권한 및 역할 관리

### 6.1 역할 정의
| 역할 | OpenProject 권한 | Gitea 권한 |
|------|------------------|------------|
| Admin | 전체 관리 | Owner |
| PM | 프로젝트 관리, 일정 편집 | Write |
| Developer | Task 편집, 문서 작성 | Write |
| QA | Task 조회, 테스트 결과 입력 | Read |
| Viewer | 조회만 가능 | Read |

### 6.2 SSO 통합
- **인증 방식**: LDAP / OAuth2 / SAML
- **단일 로그인**: 한 번의 로그인으로 두 시스템 접근
- **권한 동기화**: 역할 변경 시 자동 반영

---

## 7. 통합 대시보드

### 7.1 주요 지표
- **프로젝트 진행률**: 완료된 Task / 전체 Task
- **일정 준수율**: 기한 내 완료 Task 비율
- **코드 품질**: 테스트 커버리지, 코드 리뷰 완료율
- **배포 현황**: 배포 성공률, 배포 빈도
- **장애 현황**: 발생 건수, 평균 복구 시간 (MTTR)

### 7.2 리포팅
- **주간 보고서**: 자동 생성 및 이메일 발송
- **스프린트 리포트**: 번다운 차트, 벨로시티
- **품질 리포트**: 버그 발생 추이, 해결 현황

---

## 8. 시스템 아키텍처

```
                    ┌─────────────────┐
                    │   Nginx Proxy   │ :9000
                    │  (리버스 프록시)  │
                    └────────┬────────┘
                             │
           ┌─────────────────┼─────────────────┐
           │                 │                 │
    ┌──────▼──────┐   ┌──────▼──────┐   ┌──────▼──────┐
    │ OpenProject │   │    Gitea    │   │   Grafana   │
    │   :9001     │   │    :9002    │   │    :9005    │
    └──────┬──────┘   └──────┬──────┘   └─────────────┘
           │                 │
           │    ┌────────────┘
           │    │
    ┌──────▼────▼─────┐   ┌─────────────┐
    │   PostgreSQL    │   │    Redis    │
    │     :9003       │   │    :9004    │
    └─────────────────┘   └─────────────┘
```

---

## 9. 데이터 백업 전략

### 9.1 백업 대상
- PostgreSQL 데이터베이스
- Gitea 저장소 (Git 데이터)
- OpenProject 첨부 파일
- 설정 파일

### 9.2 백업 주기
| 유형 | 주기 | 보관 기간 |
|------|------|-----------|
| 전체 백업 | 일 1회 | 30일 |
| 증분 백업 | 4시간 | 7일 |
| 트랜잭션 로그 | 실시간 | 3일 |

---

## 10. 보안 고려사항

### 10.1 네트워크 보안
- HTTPS 적용 (Let's Encrypt / 자체 인증서)
- 방화벽 설정 (허용된 IP만 접근)
- VPN 연동 (외부 접근 시)

### 10.2 데이터 보안
- 데이터베이스 암호화
- 백업 데이터 암호화
- 민감 정보 마스킹

### 10.3 접근 제어
- 2FA (2단계 인증) 적용
- 세션 타임아웃 설정
- 감사 로그 기록
